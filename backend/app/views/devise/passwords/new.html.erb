<div class="m-3">
  <%= render 'shared/form_errors', object: resource %>
</div>

<h1 class="text-uppercase title-devise mb-5 mt-5"><%= t('forgot_password_title') %></h1>

<%= form_for(resource, as: resource_name, url: password_path(resource_name), html: { method: :post }) do |f| %>
  <div class="text-center">
    <!-- Instructional text above email input -->
    <div class="theme-text mb-2" style="font-size: 0.95rem;">
      <%= t('reset_instructions_note') %>
    </div>

    <!-- Email input -->
    <%= f.email_field :email,
      placeholder: t('email'),
      required: true,
      autofocus: true,
      autocomplete: "email",
      class: "login-input"
    %>

    <!-- Submit button -->
    <%= f.submit t('send_reset_password_instructions'), class: "text-uppercase login-button mt-4", id: 'refresh-button' %>

    <!-- Link moved below button -->
    <div class="text-center mt-3 theme-text">
      <%= t('remembered_your_password') %>
      <%= link_to t('sign_in'), new_session_path(resource_name), class: 'login-link' %>
    </div>
  </div>
<% end %>

<script>
  document.getElementById('refresh-button').addEventListener('click', function(e) {
    setTimeout(() => {
      const errors = document.querySelectorAll(".alert.alert-danger");
      if (errors.length > 0) {
        location.reload();
      }
    }, 2000);
  });
</script>



